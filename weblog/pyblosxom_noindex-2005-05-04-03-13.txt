pyblosxom-noindex
#parser blosxom

After some amount of perseverance, I finally figured out how to make
pyblosxom insert "noindex" meta tags in the top-level index page. This was
the last barrier keeping me from linking this blog to the main site, since I
didn't want Google indexing a page that's going to change every few days
anyway.

For reference, here's the plugin I made. It's remarkably simple, after I
traced through the code for several hours to figure out what function needed
to be hooked.

<pre>
#! /usr/bin/python

import sys

template = \
"""&lt;html&gt;
&lt;head&gt;&lt;title&gt;$blog_title_with_path&lt;/title&gt;
&lt;meta name="robots" content="follow,noindex" /&gt;
&lt;/head&gt;

&lt;body&gt;&lt;h1&gt;$blog_title&lt;/h1&gt;&lt;p&gt;$pi_da $pi_mo $pi_yr&lt;/p&gt;

"""

def cb_head(args):
    """This replaces the HEAD portion of the template whenever a 'directory'
    is being rendered. The modified template adds special 'noindex' meta tags
    to tell google that it shouldn't bother indexing the main page (since it
    will change), but to index the permalink pages instead.
    """
    #print &gt;&gt;sys.stderr, args['template']
    if args['request'].getData()['bl_type'] == "dir":
        args['template'] = template
    return args
&lt;/pre&gt;
